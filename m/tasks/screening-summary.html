
	
<div>
    <form id=F__ID>
        <table id=tb__header>
            <col style='width:337px' /><col style='width:260px' /><col /></colgroup>
            <tr>
                <td colspan="3" style='font-size:22px;padding: 20px'>
                    <center><b>SCREENING INFORMATION SHEET</b></center>
                </td>
            </tr>
        </table>
        <table id=tb__ID>
            <col style='width:337px' /><col style='width:260px' /><col /></colgroup>
            <tr>
                <td>Subject ID:</td><td colspan="2" id=subjid__ID></td>
            </tr>
            <tr>
                <td><b>Database ID:</b></td><td colspan="2" id=dbid__ID></td>
            </tr>
        </table>
        <table id=tb__IDD>
            <col style='width:337px' /><col style='width:260px' /><col /></colgroup>
            <tr>
                <td><b><center>Questionnaries<br></td>
                <td><b><center>Inclusion/Exclusion<br></td>
                <td><b><center>Participant results<br></td></center>
            </tr>
        </table>
		<table id=tb__ID>
              <col style='width:337px' /><col style='width:260px' /><col /></colgroup>
            <tr>
                <td><b>Weinstein Noise Sensitivity</b></td><td><center>Exclusion&lt;58</td><td id=wnss__ID></td>
            </tr>
            <tr>
                <td><b>Insomnia Severity Index</b></td><td><center>Exclusion&gt;18</td><td id=isi__ID></td>
            </tr>
            <tr>
                <td><b>Pregnant</b></td><td><center>Exclusion if YES</td><td id=pregnant__ID></td>
            </tr>
						 <tr>
                <td><b>Child &lt;5 Years </b></td><td><center>Exclusion if YES</td><td id=child__ID></td>
            </tr>
						<tr>
                <td><b>Shift worker</b></td><td><center>Exclusion if YES</td><td id=shiftworker__ID></td>
            </tr>
		</table>
		<table id=tb__header>
						<td style='text-align:center;width:600px'><b>FLAGS<br></td>
		</table>
		<table id=tb__ID>
						<col style='width:337px' /><col style='width:260px' /><col /></colgroup>
							<tr>
								<td>Travel</td><td colspan="2" id=travel__ID></td>
							</tr>
							<tr>
								<td>Medication</td><td colspan="2" id=medication__ID></td>
							</tr>
							<tr>
								<td>Other Medications</td><td colspan="2" id=othermed__ID></td>
							</tr>
							<tr>
								<td>Prescribed Sleep meds or others </td><td colspan="2" id=slp_medication__ID></td>
							</tr>
							<tr>
								<td>Sleep Disorder</td><td colspan="2" id=sleepdisorders__ID></td>
							</tr>
							
							<tr>
									<td>Medical History</td><td colspan="2" id=medhx__ID></td>
							</tr>
							<tr>
									<td>Other Medical History</td><td colspan="2" id=othermedhx__ID></td>
							</tr>
						
    	</table>
	
		</form>
</div>
<script>
function F__ID(){
    //-------------------------------------
    var m=$vm.module_list['__MODULE__'];
    //-------------------------------------
    $('#D__ID').on('load',function(){
        var participant=m.input.record;
        var participant_uid=participant.UID
	  		var sub_ID =participant.Subject_ID

		 $('#dbid__ID').text(participant_uid);
			$('#subjid__ID').text(sub_ID);


		var sql="select Information from [TABLE-91000797] where PUID="+participant_uid;
			$VmAPI.request({data:{cmd:'query_records',sql:sql},callback:function(res){
            if(res.records.length!=0){
							var record=res.records[0];
							$('#wnss__ID').text(record.wnss);
					}
			}})

		    
		var sql="select Information from [TABLE-91000802] where PUID="+participant_uid;
			$VmAPI.request({data:{cmd:'query_records',sql:sql},callback:function(res){
            if(res.records.length!=0){
							var record=res.records[0];
							$('#isi__ID').text(record.ISI);
					}
			}})
		
		var sql="select Information from [TABLE-91000795] where PUID="+participant_uid;
			$VmAPI.request({data:{cmd:'query_records',sql:sql},callback:function(res){
            if(res.records.length!=0){
							var record=res.records[0];
							$('#pregnant__ID').text(record.pregnant);
							$('#child__ID').text(record.children);
							$('#travel__ID').text(record.travel); 
					}
			}})
			
		var sql="select Information from [TABLE-91000796] where PUID="+participant_uid;
			$VmAPI.request({data:{cmd:'query_records',sql:sql},callback:function(res){
            if(res.records.length!=0){
							var record=res.records[0];
							$('#shiftworker__ID').text(record.current_work);
					}
			}})
				var sql="select Information from [TABLE-91000800] where PUID="+participant_uid;
			$VmAPI.request({data:{cmd:'query_records',sql:sql},callback:function(res){
            if(res.records.length!=0){
							var record=res.records[0];
							var ut_text="OSA:"+(record.diagnosis_OSA)+"\n Insomnia:"+(record.diagnosis_insom)+"\n Narcolepsy:"+(record.diagnosis_narco)+"\n RLS or PLMS:"+(record.diagnosis_RLS)+"\n Bruxism:"+(record.diagnosis_brux)+"\n RBD:"+(record.diagnosis_REM)+"\n Parasomnias:"+(record.diagnosis_paras)+"\n OHS:"+(record.diagnosis_hypo)+"\n DSPD:"+ (record.diagnosis_DSPD);
							var t_text=$vm.text(ut_text);
							t_text=t_text.replace(/\n/g,'<br>');
							$('#sleepdisorders__ID').html(t_text);
					}
			}})


var sql="select Information from [TABLE-91000799] where PUID="+participant_uid;
			$VmAPI.request({data:{cmd:'query_records',sql:sql},callback:function(res){
            if(res.records.length!=0){
							var record=res.records[0];	
						$('#slp_medication__ID').text("Medication to sleep:"+ (record.sleep_med)+"\n"	+"Other Sleep meds:"+ (record.sleep_suppl));
						$('#othermed__ID').text("Other Sleep Medication: "+(record.o_sleep_med) + "Other Antidepressants:"+(record.o_antidep_med)+"Other Stimulants and Weight Reducing Medications:"+(record.o_stim_weight_med)+"Other Antipsychotics:"+(record.o_antipsych_med));
						
						var text="";
						if(record.curr_clonazepam=='on') text+="popcurr clonazepam<br>"
						if(record.curr_diazepam=='on') text+="popcurr diazepam<br>"
						
						$('#medication__ID').html(text);

					/*m.cell_render = function (records, I, field, td) {
						switch(field){
						case 'curr_clonazepam':
							case 'curr_diazepam':
							case 'curr_flunitrazepam':
							case 'curr_lorazepam':
							case 'curr_melatonin':
							case 'curr_nitrazepam':
							case 'curr_oxazepam':
							case 'curr_temazepam':
							case 'curr_zopiclone':
							case 'curr_zolpidem':
							case 'curr_agomelatine':
							case 'curr_citalopram':
							case 'curr_escitalopram':
							case 'curr_fluoxetine':
							case 'curr_lithium':
							case 'curr_mirtazapine':
							case 'curr_paroxetine':
							case 'curr_sertraline':
							case 'curr_venlafaxine':
							case 'curr_dexamphetamine':
							case 'curr_methylpenidate':
							case 'curr_modafinil':
							case 'curr_phentermine':
							case 'curr_chlorpromazine':
							case 'curr_haloperidol':
							case 'curr_olanzapine':
							case 'curr_quetiapine':
							case 'curr_risperidone':
						switch(record[I].field){
							case "on" : $('#medication__ID').text(record[I].field);
							break;
							//case "off": break;
						}
					}
				}*/
			}
		}})

var sql="select Information from [TABLE-91000801] where PUID="+participant_uid;
			$VmAPI.request({data:{cmd:'query_records',sql:sql},callback:function(res){
            if(res.records.length!=0){
							var record=res.records[0];
							$('#medhx__ID').text("Anxiety:"+(record.anxiety)+"Bipolar:"+(record.bipolar)+"Depression:"+(record.depression)+"PTSD:"+(record.posttrauma));	
							$('#othermedhx__ID').text(record.other_psychiatric_specify);
					}
			}})




    })
    //-------------------------------------
}
</script>
<style>
        VmInclude:__COMPONENT__/f/form.01.css 
        VmInclude:__CURRENT_PATH__/task-form.css
    #tb__header{
        border: 2px solid #000;
        width:800px;
        border-collapse:collapse;
        background-color: #f0f0f0;
        padding: 100px;
  }

    #tb__ID{
        border: 2px solid #000;
        width:800px;
        border-collapse:collapse;

    }
    #tb__ID td{
        border: 1px solid #888;
        padding: 20px;
    }
    #tb__IDD{
        border: 2px solid #000;
        width:800px;
        border-collapse:collapse;
        background-color: #f0f0f0;
        text-align: center;


        }
    #tb__IDD td{
        border: 1px solid #888;
        padding: 10px;


    }
    @media print {
        body * {
            visibility: hidden;
        }
        #F__ID, #F__ID * {
            visibility: visible;
        }
        .c_print {
            display: none;
        }
        #F__ID {
            position: absolute;
            left: 0;
            top: 0;
        }
        .file_buttons{
            display:none;
        }
    }

</style>
